<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="../../packages/umd-package/dist/dev.js"></script>
  </head>
  <body>
    <button onclick="openWindow()">open post</button>
    <button onclick="postWin()">postWin</button>
    <script>
      const create = window.$wpm_create$
      const post = window.$wpm_post$
      const createIframe = window.$wpm_createIframe$
      const openWin = window.$wpm_openWin$
      async function postWin() {
        const res = await post('postWin/sub/login', { name: 'jacky', age: 16 })
        console.log(res)
      }
      function openWindow() {
        const postTarget = openWin({
          domId: 'postWin',
          src: './post.html',
        })
        post('postWin/sub/login1', { data: 'ann' })
        post('postWin/sub/login2', { data: 'hello' })
      }
      create({
        name: 'topApi',
        exports: {
          getAppId(data, r) {
            r('19386')
          },
        },
      })
      createIframe({
        domId: 'post',
        src: './post.html',
      })
      post('post/sub/login1', { name: 'jacky1', age: 16 })
      post('post/sub/login2', { name: 'jacky2', age: 16 })
    </script>
  </body>
</html>
